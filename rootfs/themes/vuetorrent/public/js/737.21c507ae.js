(self["webpackChunkvuetorrent"]=self["webpackChunkvuetorrent"]||[]).push([[737],{7045:function(e,t,s){var i=s(6339),a=s(3070);e.exports=function(e,t,s){return s.get&&i(s.get,t,{getter:!0}),s.set&&i(s.set,t,{setter:!0}),a.f(e,t,s)}},7066:function(e,t,s){"use strict";var i=s(9670);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2087:function(e,t,s){var i=s(7854),a=s(9781),n=s(7045),r=s(7066),l=s(7293),o=i.RegExp,d=o.prototype,c=a&&l((function(){var e=!0;try{o(".","d")}catch(c){e=!1}var t={},s="",i=e?"dgimsy":"gimsy",a=function(e,i){Object.defineProperty(t,e,{get:function(){return s+=i,!0}})},n={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var r in e&&(n.hasIndices="d"),n)a(r,n[r]);var l=Object.getOwnPropertyDescriptor(d,"flags").get.call(t);return l!==i||s!==i}));c&&n(d,"flags",{configurable:!0,get:r})},546:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return De}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"px-1 px-sm-5 background noselect"},[t("v-row",{staticClass:"grey--text",attrs:{"no-gutters":"",align:"center",justify:"center"}},[t("v-col",[t("h1",{staticClass:"subtitle-1 ml-2",staticStyle:{"font-size":"1.6em !important"}},[e._v(" "+e._s(e._f("titleCase")(e.$t("modals.detail.title")))+" ")])]),t("v-col",{staticClass:"align-center justify-center"},[t("v-card-actions",{staticClass:"justify-end"},[t("v-btn",{attrs:{small:"",elevation:"0"},on:{click:e.close}},[t("v-icon",[e._v(e._s(e.mdiClose))])],1)],1)],1)],1),t("v-row",{staticClass:"ma-0 pa-0"},[t("v-tabs",{attrs:{"align-with-title":"","show-arrows":"","background-color":"primary"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("v-tabs-slider",{attrs:{color:"white"}}),t("v-tab",{staticClass:"white--text",attrs:{href:"#info"}},[t("h4",[e._v(e._s(e.$t("modals.detail.tabTitleInfo")))])]),t("v-tab",{staticClass:"white--text",attrs:{href:"#trackers"}},[t("h4",[e._v(e._s(e.$t("modals.detail.tabTitleTrackers")))])]),t("v-tab",{staticClass:"white--text",attrs:{href:"#peers"}},[t("h4",[e._v(e._s(e.$t("modals.detail.tabTitlePeers")))])]),t("v-tab",{staticClass:"white--text",attrs:{href:"#content"}},[t("h4",[e._v(e._s(e.$t("modals.detail.tabTitleContent")))])]),t("v-tab",{staticClass:"white--text",attrs:{href:"#tagsAndCategories"}},[t("h4",[e._v(e._s(e.$t("modals.detail.tabTitleTagsCategories")))])])],1),t("v-card-text",{staticClass:"pa-0"},[t("v-tabs-items",{attrs:{touchless:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("v-tab-item",{attrs:{eager:"",value:"info"}},[t("info",{attrs:{"is-active":"info"===e.tab,hash:e.hash}})],1),t("v-tab-item",{attrs:{eager:"",value:"trackers"}},[t("Trackers",{attrs:{"is-active":"trackers"===e.tab,hash:e.hash}})],1),t("v-tab-item",{attrs:{eager:"",value:"peers"}},[t("Peers",{attrs:{"is-active":"peers"===e.tab,hash:e.hash}})],1),t("v-tab-item",{attrs:{eager:"",value:"content"}},[t("Content",{attrs:{"is-active":"content"===e.tab,hash:e.hash}})],1),t("v-tab-item",{attrs:{eager:"",value:"tagsAndCategories"}},[t("TagsAndCategories",{attrs:{"is-active":"tagsAndCategories"===e.tab,hash:e.hash}})],1)],1)],1)],1)],1)},a=[],n=s(629),r=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[t("v-treeview",{attrs:{items:e.fileTree,open:e.opened,activatable:"",selectable:"","item-key":"fullName","open-all":""},on:{"update:open":function(t){e.opened=t}},scopedSlots:e._u([{key:"prepend",fn:function({item:s,open:i}){return[s.icon?t("v-icon",[e._v(" "+e._s(s.icon)+" ")]):t("v-icon",[e._v(" "+e._s(e.mdiFolderOpen)+" ")])]}},{key:"label",fn:function({item:s}){return[s.editing?e._e():t("span",[e._v(e._s(s.name))]),s.editing?t("v-text-field",{attrs:{autofocus:""},model:{value:s.newName,callback:function(t){e.$set(s,"newName",t)},expression:"item.newName"}}):e._e()]}},e.$vuetify.breakpoint.smAndDown?null:{key:"append",fn:function({item:s}){return[s.icon?t("div",[t("span",[e._v("["+e._s(s.size)+"]")]),t("span",{staticClass:"ml-4"},[e._v(e._s(s.progress)+"%")]),t("span",{staticClass:"ml-4"},[e._v("[ "+e._s(e._f("priority")(s.priority))+" ]")]),t("v-menu",{attrs:{"open-on-hover":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t("v-btn",e._g({staticClass:"accent white--text elevation-0 px-4 ml-2",attrs:{fab:"","x-small":""}},s),[t("v-icon",[e._v(e._s(e.mdiTrendingUp))])],1)]}}],null,!0)},[t("v-list",e._l(e.priority_options,(function(i){return t("v-list-item",{key:i.value,attrs:{link:""},on:{click:function(t){return e.setFilePrio(s.id,i.value)}}},[t("v-icon",[e._v(e._s(i.icon))]),t("v-list-item-title",{staticClass:"caption"},[e._v(" "+e._s(i.name)+" ")])],1)})),1)],1),s.editing?e._e():t("v-btn",{staticClass:"accent white--text elevation-0 px-4 ml-2",attrs:{fab:"","x-small":""},on:{click:function(t){return e.edit(s)}}},[t("v-icon",[e._v(e._s(e.mdiPencil))])],1),s.editing?t("v-btn",{staticClass:"accent white--text elevation-0 px-4 ml-2",attrs:{fab:"","x-small":""},on:{click:function(t){return e.renameFile(s)}}},[t("v-icon",[e._v(e._s(e.mdiContentSave))])],1):e._e(),s.editing?t("v-btn",{staticClass:"error white--text elevation-0 px-4 ml-2",attrs:{fab:"","x-small":""},on:{click:function(t){return e.togleEditing(s)}}},[t("v-icon",[e._v(e._s(e.mdiClose))])],1):e._e()],1):t("span",[e._v(e._s(s.children.length)+" Files")])]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},l=[],o=(s(6699),s(8545)),d=s(9614),c=s(2241),h=s(5317);const m=[{name:"max",icon:h.hii,value:7},{name:"high",icon:h.XHH,value:6},{name:"normal",icon:h.dYk,value:1},{name:"unwanted",icon:h.T7J,value:0}];var v={name:"Content",filters:{priority(e){if(4===e)return"normal";const t=m.find((t=>t.value===e));return t?t.name:"undefined"}},mixins:[c.xG],props:{hash:String,isActive:Boolean},data(){return{opened:null,selected:[],treeData:null,priority_options:m,mdiFolderOpen:h.IC9,mdiFolder:h.in3,mdiFile:h.iA5,mdiTrendingUp:h.sIZ,mdiPencil:h.r9,mdiContentSave:h.Tls,mdiClose:h.r5M}},computed:{fileTree(){return this.treeData?(0,d.FG)(this.treeData):[]}},watch:{isActive(e){e&&this.getTorrentFiles()},selected(e,t){this.changeFilePriorities(e,t)}},created(){this.initFiles()},methods:{initFiles(){this.getTorrentFiles().then((()=>{this.opened=[].concat(...this.treeData.map((e=>e.name.split("/"))).filter((e=>e.splice(-1,1)))).filter(((e,t,s)=>t===s.indexOf(e))),this.selected=this.treeData.filter((e=>0!==e.priority)).map((e=>e.name))}))},async getTorrentFiles(){const{data:e}=await o.Z.getTorrentFiles(this.hash);e.forEach(((e,t)=>{e.id=t,e.name=e.name.replace(".unwanted/","")})),this.treeData=e},async changeFilePriorities(e,t){if(e.length==t.length)return;const s=t.filter((t=>!e.includes(t))).map((e=>this.treeData.find((t=>t.name===e)))).filter((e=>0!==e.priority)).map((e=>e.id)),i=e.filter((e=>!t.includes(e))).map((e=>this.treeData.find((t=>t.name===e)))).filter((e=>0===e.priority)).map((e=>e.id));s.length&&await o.Z.setTorrentFilePriority(this.hash,s,0),i.length&&await o.Z.setTorrentFilePriority(this.hash,i,1),(s.length||i.length)&&await this.getTorrentFiles()},togleEditing(e){e.editing=!e.editing},edit(e){e.newName=e.name,this.togleEditing(e)},renameFile(e){o.Z.renameFile(this.hash,e.id,e.newName),e.name=e.newName,this.togleEditing(e)},setFilePrio(e,t){o.Z.setTorrentFilePriority(this.hash,[e],t).then((()=>this.initFiles()))}}},p=v,u=s(1001),g=s(3453),_=s.n(g),f=s(4562),C=s(9582),y=s(4324),b=s(5808),T=s(4525),k=s(6740),S=s(4568),w=s(9780),x=s(7394),$=s(4712),O=s(6878),I=s(7678),Z=s(5352);const P=(0,I.Z)(O.Z,(0,$.f)("treeview")),A={activatable:Boolean,activeClass:{type:String,default:"v-treeview-node--active"},color:{type:String,default:"primary"},disablePerNode:Boolean,expandIcon:{type:String,default:"$subgroup"},indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},itemChildren:{type:String,default:"children"},itemDisabled:{type:String,default:"disabled"},itemKey:{type:String,default:"id"},itemText:{type:String,default:"name"},loadChildren:Function,loadingIcon:{type:String,default:"$loading"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"},openOnClick:Boolean,rounded:Boolean,selectable:Boolean,selectedColor:{type:String,default:"accent"},shaped:Boolean,transition:Boolean,selectionType:{type:String,default:"leaf",validator:e=>["leaf","independent"].includes(e)}},V=P.extend().extend({name:"v-treeview-node",inject:{treeview:{default:null}},props:{level:Number,item:{type:Object,default:()=>null},parentIsDisabled:Boolean,...A},data:()=>({hasLoaded:!1,isActive:!1,isIndeterminate:!1,isLoading:!1,isOpen:!1,isSelected:!1}),computed:{disabled(){return(0,Z.vO)(this.item,this.itemDisabled)||!this.disablePerNode&&this.parentIsDisabled&&"leaf"===this.selectionType},key(){return(0,Z.vO)(this.item,this.itemKey)},children(){const e=(0,Z.vO)(this.item,this.itemChildren);return e&&e.filter((e=>!this.treeview.isExcluded((0,Z.vO)(e,this.itemKey))))},text(){return(0,Z.vO)(this.item,this.itemText)},scopedProps(){return{item:this.item,leaf:!this.children,selected:this.isSelected,indeterminate:this.isIndeterminate,active:this.isActive,open:this.isOpen}},computedIcon(){return this.isIndeterminate?this.indeterminateIcon:this.isSelected?this.onIcon:this.offIcon},hasChildren(){return!!this.children&&(!!this.children.length||!!this.loadChildren)}},created(){this.treeview.register(this)},beforeDestroy(){this.treeview.unregister(this)},methods:{checkChildren(){return new Promise((e=>{if(!this.children||this.children.length||!this.loadChildren||this.hasLoaded)return e();this.isLoading=!0,e(this.loadChildren(this.item))})).then((()=>{this.isLoading=!1,this.hasLoaded=!0}))},open(){this.isOpen=!this.isOpen,this.treeview.updateOpen(this.key,this.isOpen),this.treeview.emitOpen()},genLabel(){const e=[];return this.$scopedSlots.label?e.push(this.$scopedSlots.label(this.scopedProps)):e.push(this.text),this.$createElement("div",{slot:"label",staticClass:"v-treeview-node__label"},e)},genPrependSlot(){return this.$scopedSlots.prepend?this.$createElement("div",{staticClass:"v-treeview-node__prepend"},this.$scopedSlots.prepend(this.scopedProps)):null},genAppendSlot(){return this.$scopedSlots.append?this.$createElement("div",{staticClass:"v-treeview-node__append"},this.$scopedSlots.append(this.scopedProps)):null},genContent(){const e=[this.genPrependSlot(),this.genLabel(),this.genAppendSlot()];return this.$createElement("div",{staticClass:"v-treeview-node__content"},e)},genToggle(){return this.$createElement(y.Z,{staticClass:"v-treeview-node__toggle",class:{"v-treeview-node__toggle--open":this.isOpen,"v-treeview-node__toggle--loading":this.isLoading},slot:"prepend",on:{click:e=>{e.stopPropagation(),this.isLoading||this.checkChildren().then((()=>this.open()))}}},[this.isLoading?this.loadingIcon:this.expandIcon])},genCheckbox(){return this.$createElement(y.Z,{staticClass:"v-treeview-node__checkbox",props:{color:this.isSelected||this.isIndeterminate?this.selectedColor:void 0,disabled:this.disabled},on:{click:e=>{e.stopPropagation(),this.isLoading||this.checkChildren().then((()=>{this.$nextTick((()=>{this.isSelected=!this.isSelected,this.isIndeterminate=!1,this.treeview.updateSelected(this.key,this.isSelected),this.treeview.emitSelected()}))}))}}},[this.computedIcon])},genLevel(e){return(0,Z.MT)(e).map((()=>this.$createElement("div",{staticClass:"v-treeview-node__level"})))},genNode(){const e=[this.genContent()];return this.selectable&&e.unshift(this.genCheckbox()),this.hasChildren?e.unshift(this.genToggle()):e.unshift(...this.genLevel(1)),e.unshift(...this.genLevel(this.level)),this.$createElement("div",this.setTextColor(this.isActive&&this.color,{staticClass:"v-treeview-node__root",class:{[this.activeClass]:this.isActive},on:{click:()=>{this.openOnClick&&this.hasChildren?this.checkChildren().then(this.open):this.activatable&&!this.disabled&&(this.isActive=!this.isActive,this.treeview.updateActive(this.key,this.isActive),this.treeview.emitActive())}}}),e)},genChild(e,t){return this.$createElement(V,{key:(0,Z.vO)(e,this.itemKey),props:{activatable:this.activatable,activeClass:this.activeClass,item:e,selectable:this.selectable,selectedColor:this.selectedColor,color:this.color,disablePerNode:this.disablePerNode,expandIcon:this.expandIcon,indeterminateIcon:this.indeterminateIcon,offIcon:this.offIcon,onIcon:this.onIcon,loadingIcon:this.loadingIcon,itemKey:this.itemKey,itemText:this.itemText,itemDisabled:this.itemDisabled,itemChildren:this.itemChildren,loadChildren:this.loadChildren,transition:this.transition,openOnClick:this.openOnClick,rounded:this.rounded,shaped:this.shaped,level:this.level+1,selectionType:this.selectionType,parentIsDisabled:t},scopedSlots:this.$scopedSlots})},genChildrenWrapper(){if(!this.isOpen||!this.children)return null;const e=[this.children.map((e=>this.genChild(e,this.disabled)))];return this.$createElement("div",{staticClass:"v-treeview-node__children"},e)},genTransition(){return this.$createElement(x.Fx,[this.genChildrenWrapper()])}},render(e){const t=[this.genNode()];return this.transition?t.push(this.genTransition()):t.push(this.genChildrenWrapper()),e("div",{staticClass:"v-treeview-node",class:{"v-treeview-node--leaf":!this.hasChildren,"v-treeview-node--click":this.openOnClick,"v-treeview-node--disabled":this.disabled,"v-treeview-node--rounded":this.rounded,"v-treeview-node--shaped":this.shaped,"v-treeview-node--selected":this.isSelected},attrs:{"aria-expanded":String(this.isOpen)}},t)}});var D=V,F=s(6669),L=s(4101);function E(e,t,s){const i=(0,Z.vO)(e,s);return i.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}function B(e,t,s,i,a,n,r){if(e(t,s,a))return!0;const l=(0,Z.vO)(t,n);if(l){let t=!1;for(let o=0;o<l.length;o++)B(e,l[o],s,i,a,n,r)&&(t=!0);if(t)return!0}return r.add((0,Z.vO)(t,i)),!1}var N=(0,I.Z)((0,$.J)("treeview"),F.Z).extend({name:"v-treeview",provide(){return{treeview:this}},props:{active:{type:Array,default:()=>[]},dense:Boolean,disabled:Boolean,filter:Function,hoverable:Boolean,items:{type:Array,default:()=>[]},multipleActive:Boolean,open:{type:Array,default:()=>[]},openAll:Boolean,returnObject:{type:Boolean,default:!1},search:String,value:{type:Array,default:()=>[]},...A},data:()=>({level:-1,activeCache:new Set,nodes:{},openCache:new Set,selectedCache:new Set}),computed:{excludedItems(){const e=new Set;if(!this.search)return e;for(let t=0;t<this.items.length;t++)B(this.filter||E,this.items[t],this.search,this.itemKey,this.itemText,this.itemChildren,e);return e}},watch:{items:{handler(){const e=Object.keys(this.nodes).map((e=>(0,Z.vO)(this.nodes[e].item,this.itemKey))),t=this.getKeys(this.items),s=(0,Z.tX)(t,e);if(!s.length&&t.length<e.length)return;s.forEach((e=>delete this.nodes[e]));const i=[...this.selectedCache];this.selectedCache=new Set,this.activeCache=new Set,this.openCache=new Set,this.buildTree(this.items),(0,Z.vZ)(i,[...this.selectedCache])||this.emitSelected()},deep:!0},active(e){this.handleNodeCacheWatcher(e,this.activeCache,this.updateActive,this.emitActive)},value(e){this.handleNodeCacheWatcher(e,this.selectedCache,this.updateSelected,this.emitSelected)},open(e){this.handleNodeCacheWatcher(e,this.openCache,this.updateOpen,this.emitOpen)}},created(){const e=e=>this.returnObject?(0,Z.vO)(e,this.itemKey):e;this.buildTree(this.items);for(const t of this.value.map(e))this.updateSelected(t,!0,!0);for(const t of this.active.map(e))this.updateActive(t,!0)},mounted(){(this.$slots.prepend||this.$slots.append)&&(0,L.Kd)("The prepend and append slots require a slot-scope attribute",this),this.openAll?this.updateAll(!0):(this.open.forEach((e=>this.updateOpen(this.returnObject?(0,Z.vO)(e,this.itemKey):e,!0))),this.emitOpen())},methods:{updateAll(e){Object.keys(this.nodes).forEach((t=>this.updateOpen((0,Z.vO)(this.nodes[t].item,this.itemKey),e))),this.emitOpen()},getKeys(e,t=[]){for(let s=0;s<e.length;s++){const i=(0,Z.vO)(e[s],this.itemKey);t.push(i);const a=(0,Z.vO)(e[s],this.itemChildren);a&&t.push(...this.getKeys(a))}return t},buildTree(e,t=null){for(let i=0;i<e.length;i++){var s;const a=e[i],n=(0,Z.vO)(a,this.itemKey),r=null!=(s=(0,Z.vO)(a,this.itemChildren))?s:[],l=this.nodes.hasOwnProperty(n)?this.nodes[n]:{isSelected:!1,isIndeterminate:!1,isActive:!1,isOpen:!1,vnode:null},o={vnode:l.vnode,parent:t,children:r.map((e=>(0,Z.vO)(e,this.itemKey))),item:a};if(this.buildTree(r,n),"independent"!==this.selectionType&&null!==t&&!this.nodes.hasOwnProperty(n)&&this.nodes.hasOwnProperty(t)?o.isSelected=this.nodes[t].isSelected:(o.isSelected=l.isSelected,o.isIndeterminate=l.isIndeterminate),o.isActive=l.isActive,o.isOpen=l.isOpen,this.nodes[n]=o,r.length&&"independent"!==this.selectionType){const{isSelected:e,isIndeterminate:t}=this.calculateState(n,this.nodes);o.isSelected=e,o.isIndeterminate=t}!this.nodes[n].isSelected||"independent"!==this.selectionType&&0!==o.children.length||this.selectedCache.add(n),this.nodes[n].isActive&&this.activeCache.add(n),this.nodes[n].isOpen&&this.openCache.add(n),this.updateVnodeState(n)}},calculateState(e,t){const s=t[e].children,i=s.reduce(((e,s)=>(e[0]+=+Boolean(t[s].isSelected),e[1]+=+Boolean(t[s].isIndeterminate),e)),[0,0]),a=!!s.length&&i[0]===s.length,n=!a&&(i[0]>0||i[1]>0);return{isSelected:a,isIndeterminate:n}},emitOpen(){this.emitNodeCache("update:open",this.openCache)},emitSelected(){this.emitNodeCache("input",this.selectedCache)},emitActive(){this.emitNodeCache("update:active",this.activeCache)},emitNodeCache(e,t){this.$emit(e,this.returnObject?[...t].map((e=>this.nodes[e].item)):[...t])},handleNodeCacheWatcher(e,t,s,i){e=this.returnObject?e.map((e=>(0,Z.vO)(e,this.itemKey))):e;const a=[...t];(0,Z.vZ)(a,e)||(a.forEach((e=>s(e,!1))),e.forEach((e=>s(e,!0))),i())},getDescendants(e,t=[]){const s=this.nodes[e].children;t.push(...s);for(let i=0;i<s.length;i++)t=this.getDescendants(s[i],t);return t},getParents(e){let t=this.nodes[e].parent;const s=[];while(null!==t)s.push(t),t=this.nodes[t].parent;return s},register(e){const t=(0,Z.vO)(e.item,this.itemKey);this.nodes[t].vnode=e,this.updateVnodeState(t)},unregister(e){const t=(0,Z.vO)(e.item,this.itemKey);this.nodes[t]&&(this.nodes[t].vnode=null)},isParent(e){return this.nodes[e].children&&this.nodes[e].children.length},updateActive(e,t){if(!this.nodes.hasOwnProperty(e))return;this.multipleActive||this.activeCache.forEach((e=>{this.nodes[e].isActive=!1,this.updateVnodeState(e),this.activeCache.delete(e)}));const s=this.nodes[e];s&&(t?this.activeCache.add(e):this.activeCache.delete(e),s.isActive=t,this.updateVnodeState(e))},updateSelected(e,t,s=!1){if(!this.nodes.hasOwnProperty(e))return;const i=new Map;if("independent"!==this.selectionType){for(const n of this.getDescendants(e))(0,Z.vO)(this.nodes[n].item,this.itemDisabled)&&!s||(this.nodes[n].isSelected=t,this.nodes[n].isIndeterminate=!1,i.set(n,t));const a=this.calculateState(e,this.nodes);this.nodes[e].isSelected=t,this.nodes[e].isIndeterminate=a.isIndeterminate,i.set(e,t);for(const t of this.getParents(e)){const e=this.calculateState(t,this.nodes);this.nodes[t].isSelected=e.isSelected,this.nodes[t].isIndeterminate=e.isIndeterminate,i.set(t,e.isSelected)}}else this.nodes[e].isSelected=t,this.nodes[e].isIndeterminate=!1,i.set(e,t);for(const[a,n]of i.entries())this.updateVnodeState(a),"leaf"===this.selectionType&&this.isParent(a)||(!0===n?this.selectedCache.add(a):this.selectedCache.delete(a))},updateOpen(e,t){if(!this.nodes.hasOwnProperty(e))return;const s=this.nodes[e],i=(0,Z.vO)(s.item,this.itemChildren);i&&!i.length&&s.vnode&&!s.vnode.hasLoaded?s.vnode.checkChildren().then((()=>this.updateOpen(e,t))):i&&i.length&&(s.isOpen=t,s.isOpen?this.openCache.add(e):this.openCache.delete(e),this.updateVnodeState(e))},updateVnodeState(e){const t=this.nodes[e];t&&t.vnode&&(t.vnode.isSelected=t.isSelected,t.vnode.isIndeterminate=t.isIndeterminate,t.vnode.isActive=t.isActive,t.vnode.isOpen=t.isOpen)},isExcluded(e){return!!this.search&&this.excludedItems.has(e)}},render(e){const t=this.items.length?this.items.filter((e=>!this.isExcluded((0,Z.vO)(e,this.itemKey)))).map((e=>{const t=D.options.methods.genChild.bind(this);return t(e,this.disabled||(0,Z.vO)(e,this.itemDisabled))})):this.$slots.default;return e("div",{staticClass:"v-treeview",class:{"v-treeview--hoverable":this.hoverable,"v-treeview--dense":this.dense,...this.themeClasses}},t)}}),K=(0,u.Z)(p,r,l,!1,null,null,null),j=K.exports;_()(K,{VBtn:f.Z,VCard:C.Z,VIcon:y.Z,VList:b.Z,VListItem:T.Z,VListItemTitle:k.V9,VMenu:S.Z,VTextField:w.Z,VTreeview:N});var U=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[t("v-simple-table",[t("tbody",[t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.torrentTitle"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.name)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.pieceStates"))+" ")]),t("td",{staticClass:"d-flex",attrs:{id:"pieceStates"}},[t("span",{staticClass:"mr-2 align-center d-flex"},[e._v(" "+e._s(e.torrent.progress)+"% ")]),t("canvas",{attrs:{width:"0",height:"1"}})])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.directory")))+" ")]),t("td",[e._v(" "+e._s(e.torrent.savePath)+" ")])]),t("tr",{staticStyle:{"margin-top":"10px !important"}},[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.hash"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.hash)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.size")))+" ")]),t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.size))+" "+e._s(e._f("getDataUnit")(e.torrent.size,1))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.downloaded")))+" ")]),t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.dloaded))+" "+e._s(e._f("getDataUnit")(e.torrent.dloaded,1))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.uploaded")))+" ")]),t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.uploaded))+" "+e._s(e._f("getDataUnit")(e.torrent.uploaded,1))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.ratio"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.ratio)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.downloadSpeed"))+" ")]),t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.dlspeed))+" "+e._s(e._f("getDataUnit")(e.torrent.dlspeed,1))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.uploadSpeed"))+" ")]),t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.upspeed))+" "+e._s(e._f("getDataUnit")(e.torrent.upspeed,1))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.eta"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.eta)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.peers"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.num_leechs)),t("span",{class:e.commonStyle},[e._v("/"+e._s(e.torrent.available_peers))])])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.seeds"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.num_seeds)),t("span",{class:e.commonStyle},[e._v("/"+e._s(e.torrent.available_seeds))])])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.added")))+" ")]),t("td",[e._v(" "+e._s(e.torrent.added_on)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.status"))+" ")]),t("td",[t("v-chip",{class:`${e.torrent.state.toLowerCase()} white--text caption`,attrs:{small:""}},[e._v(" "+e._s(e.torrent.state)+" ")])],1)]),e.torrent.tracker?t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.trackers"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.tracker)+" ")])]):e._e(),e.createdBy?t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.createdBy"))+" ")]),t("td",[e._v(" "+e._s(e.createdBy)+" ")])]):e._e(),e.comment?t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.comments")))+" ")]),t("td",[e._v(" "+e._s(e.comment)+" ")])]):e._e(),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.firstLastPiecePriority"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.f_l_piece_prio)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.sequentialDownload"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.seq_dl)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.autoTMM"))+" ")]),t("td",[e._v(" "+e._s(e.torrent.auto_tmm)+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.shareRatioLimit"))+" ")]),t("td",[e._v(" "+e._s(e._f("limitToValue")(e.torrent.ratio_limit))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.shareTimeLimit"))+" ")]),t("td",[e._v(" "+e._s(e._f("limitToValue")(e.torrent.ratio_time_limit))+" ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.downloadLimit"))+" ")]),e.torrent.dl_limit>0?t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.dl_limit))+" "+e._s(e._f("getDataUnit")(e.torrent.dl_limit))),t("span",[e._v("/s ")])]):t("td",[e._v(" ∞ ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e.$t("modals.detail.pageInfo.uploadLimit"))+" ")]),e.torrent.up_limit>0?t("td",[e._v(" "+e._s(e._f("getDataValue")(e.torrent.up_limit))+" "+e._s(e._f("getDataUnit")(e.torrent.up_limit))),t("span",[e._v("/s ")])]):t("td",[e._v(" ∞ ")])]),t("tr",[t("td",{class:e.commonStyle},[e._v(" "+e._s(e._f("titleCase")(e.$t("torrent.availability")))+" ")]),t("td",[e._v(" "+e._s(e.torrent.availability)+" ")])])])])],1)},W=[],G={name:"Info",mixins:[c.xG],props:{hash:String},data(){return{commonStyle:"caption",createdBy:null,comment:null}},computed:{...(0,n.Se)(["getTorrent"]),torrent(){return this.getTorrent(this.hash)}},mounted(){this.getTorrentProperties(),this.renderTorrentPieceStates()},methods:{async getTorrentProperties(){const e=await o.Z.getTorrentProperties(this.hash);this.createdBy=e.created_by||null,this.comment=e.comment||null},async renderTorrentPieceStates(){const e=document.querySelector("#pieceStates canvas"),{data:t}=await o.Z.getTorrentPieceStates(this.hash);if(t){e.width=t.length;const s=e.getContext("2d");s.clearRect(0,0,e.width,e.height);let i="",a=1;for(let n=0;n<t.length;++n){const r=t[n];let l="";1===r?l=this.$vuetify.theme.currentTheme["torrent-downloading"]:2===r&&(l=this.$vuetify.theme.currentTheme["torrent-done"]),l!==i?(""!==i&&(s.fillStyle=i,s.fillRect(n-a,0,a,e.height)),a=1,i=l):++a}""!==i&&(s.fillStyle=i,s.fillRect(t.length-a,0,a,e.height))}}}},R=G,z=s(4127),M=s(9449),q=(0,u.Z)(R,U,W,!1,null,"e9d0f7ce",null),H=q.exports;_()(q,{VCard:C.Z,VChip:z.Z,VSimpleTable:M.Z});s(2087);var J=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[e.peers?t("v-data-table",{attrs:{dense:"",headers:e.headers,items:e.peers,"items-per-page":-1,"hide-default-footer":!0,"mobile-breakpoint":"0"},scopedSlots:e._u([{key:"item",fn:function(s){return[t("tr",[t("td",{staticClass:"ip"},[s.item.country_code?[e.isWindows?t("img",{staticClass:"country-flag",attrs:{title:s.item.country,alt:e.codeToFlag(s.item.country_code).char,src:e.codeToFlag(s.item.country_code).url}}):[e._v(" "+e._s(e.codeToFlag(s.item.country_code).char)+" ")]]:e._e(),e._v(" "+e._s(s.item.ip)+" "),t("span",{staticClass:"grey--text"},[e._v(":"+e._s(s.item.port))])],2),t("td",[e._v(e._s(s.item.connection))]),t("td",{attrs:{title:s.item.flags_desc}},[e._v(" "+e._s(s.item.flags)+" ")]),t("td",[e._v(e._s(s.item.client))]),t("td",[e._v(e._s(e._f("progress")(s.item.progress)))]),t("td",[e._v(e._s(e._f("networkSpeed")(s.item.dl_speed)))]),t("td",[e._v(e._s(e._f("networkSize")(s.item.downloaded)))]),t("td",[e._v(e._s(e._f("networkSpeed")(s.item.up_speed)))]),t("td",[e._v(e._s(e._f("networkSize")(s.item.uploaded)))]),t("td",[e._v(e._s(e._f("progress")(s.item.relevance)))]),t("td",[e._v(e._s(s.item.files))])])]}}],null,!1,1377702202)}):e._e()],1)},X=[],Y=s(6486),Q={name:"Peers",mixins:[c.xG],props:{hash:String,isActive:Boolean},data:()=>({refreshTimer:"",peersObj:null}),computed:{rid:{get(){return this.$store.state.rid},set(e){this.$store.state.rid=e}},peers(){return(0,Y.map)(this.peersObj,((e,t)=>(0,Y.merge)({},e,{key:t})))},headers(){return[{text:this.$i18n.t("modals.detail.pagePeers.ip"),value:"ip"},{text:this.$i18n.t("modals.detail.pagePeers.connection"),value:"connection"},{text:this.$i18n.t("modals.detail.pagePeers.flags"),value:"flags"},{text:this.$i18n.t("modals.detail.pagePeers.client"),value:"client"},{text:this.$i18n.t("modals.detail.pagePeers.progress"),value:"progress"},{text:this.$i18n.t("modals.detail.pagePeers.downloadSpeed"),value:"dl_speed"},{text:this.$i18n.t("modals.detail.pagePeers.downloaded"),value:"downloaded"},{text:this.$i18n.t("modals.detail.pagePeers.upSpeed"),value:"up_speed"},{text:this.$i18n.t("modals.detail.pagePeers.uploaded"),value:"uploaded"},{text:this.$i18n.t("modals.detail.pagePeers.relevance"),value:"relevance"},{text:this.$i18n.t("modals.detail.pagePeers.files"),value:"files"}]}},watch:{isActive(e){e&&this.getTorrentPeers()}},created(){this.getTorrentPeers(),this.refreshTimer=setInterval(function(){this.getTorrentPeers()}.bind(this),2e3)},beforeDestroy(){clearTimeout(this.refreshTimer)},methods:{codeToFlag(e){return(0,d.g4)(e)},isWindows(){return(0,d.ED)()},async getTorrentPeers(){const{data:e}=await o.Z.getTorrentPeers(this.hash,this.rid+1||void 0);this.rid=e.rid,this.peersObj=e.peers}}},ee=Q,te=s(5151),se=(0,u.Z)(ee,J,X,!1,null,"3246a508",null),ie=se.exports;_()(se,{VCard:C.Z,VDataTable:te.Z});var ae=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[t("v-card-text",{staticClass:"pa-0"},[e.trackers?t("v-data-table",{attrs:{dense:"","show-select":"",headers:e.headers,items:e.trackers,"items-per-page":-1,"item-key":"url","mobile-breakpoint":"0"},scopedSlots:e._u([{key:"body",fn:function({items:s}){return[t("tbody",e._l(s,(function(s){return t("tr",{key:s.url},[t("td",["number"===typeof s.tier?t("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{value:s,"hide-details":"",color:"accent"},model:{value:e.selectedTrackers,callback:function(t){e.selectedTrackers=t},expression:"selectedTrackers"}}):e._e()],1),t("td",[e._v(e._s(s.tier))]),t("td",[e._v(e._s(s.url))]),t("td",[e._v(e._s(e._f("formatTrackerStatus")(s.status)))]),t("td",[e._v(e._s(e._f("formatTrackerNum")(s.num_peers)))]),t("td",[e._v(e._s(e._f("formatTrackerNum")(s.num_seeds)))]),t("td",[e._v(e._s(e._f("formatTrackerNum")(s.num_leeches)))]),t("td",[e._v(e._s(e._f("formatTrackerNum")(s.num_downloaded)))]),t("td",[e._v(e._s(s.msg))])])})),0)]}}],null,!1,2880887245),model:{value:e.selectedTrackers,callback:function(t){e.selectedTrackers=t},expression:"selectedTrackers"}}):e._e()],1),t("v-card-actions",{staticClass:"justify-center"},[t("v-btn",{staticClass:"error white--text elevation-0 px-4 mx-2",on:{click:e.DeleteTrackers}},[e._v(" Delete ")]),t("v-dialog",{attrs:{"content-class":"rounded-form",persistent:"","max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("v-btn",e._g(e._b({staticClass:"accent white--text elevation-0 px-4 mx-2"},"v-btn",i,!1),s),[e._v(" Add ")])]}}]),model:{value:e.trackerDialog,callback:function(t){e.trackerDialog=t},expression:"trackerDialog"}},[t("v-card",[t("v-card-title",{staticClass:"justify-center"},[t("h3",[e._v("Add Trackers")])]),t("v-card-text",[t("v-textarea",{attrs:{label:"Trackers",rows:"1",required:"",autofocus:"","auto-grow":"",clearable:"",hint:"One link per line"},model:{value:e.newTrackers,callback:function(t){e.newTrackers=t},expression:"newTrackers"}})],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.closeAddTrackers}},[e._v(" Cancel ")]),t("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.addTrackers}},[e._v(" Add ")])],1)],1)],1)],1)],1)},ne=[],re={name:"Trackers",filters:{formatTrackerStatus(e){const t=["Disabled","Not contacted","Working","Updating","Not working"];return t[e]},formatTrackerNum(e){return-1===e?"N/A":e.toString()}},mixins:[c.xG],props:{hash:String,isActive:Boolean},data:()=>({trackerDialog:!1,tempTrackers:[],newTrackers:"",selectedTrackers:[]}),computed:{trackers(){return this.tempTrackers.map((e=>({...e,isSelectable:"number"===typeof e.tier})))},headers(){return[{text:"#",value:"tier"},{text:this.$i18n.t("modals.detail.pageTrackers.url"),value:"url"},{text:this.$i18n.t("modals.detail.pageTrackers.status"),value:"status"},{text:this.$i18n.t("modals.detail.pageTrackers.peers"),value:"num_peers"},{text:this.$i18n.t("modals.detail.pageTrackers.seeds"),value:"num_seeds"},{text:this.$i18n.t("modals.detail.pageTrackers.leeches"),value:"num_leeches"},{text:this.$i18n.t("modals.detail.pageTrackers.downloaded"),value:"num_downloaded"},{text:this.$i18n.t("modals.detail.pageTrackers.message"),value:"msg"}]}},watch:{isActive(e){e&&this.getTorrentTrackers()}},created(){this.getTorrentTrackers()},methods:{async getTorrentTrackers(){const{data:e}=await o.Z.getTorrentTrackers(this.hash);this.tempTrackers=e},async addTrackers(){if(!this.newTrackers.length)return this.trackerDialog=!1;o.Z.addTorrenTrackers(this.hash,this.newTrackers),this.newTrackers="",await this.getTorrentTrackers(),this.trackerDialog=!1},closeAddTrackers(){this.newTrackers="",this.trackerDialog=!1},async DeleteTrackers(){this.selectedTrackers.length&&(o.Z.removeTorrentTrackers(this.hash,this.selectedTrackers.map((e=>e.url))),this.selectedTrackers=[],await this.getTorrentTrackers())}}},le=re,oe=s(4886),de=s(3486),ce=s(4061),he=s(3687),me=s(2648),ve=(0,u.Z)(le,ae,ne,!1,null,"242bf2e6",null),pe=ve.exports;_()(ve,{VBtn:f.Z,VCard:C.Z,VCardActions:oe.h7,VCardText:oe.ZB,VCardTitle:oe.EB,VCheckbox:de.Z,VDataTable:te.Z,VDialog:ce.Z,VSpacer:he.Z,VTextarea:me.Z});var ue=function(){var e=this,t=e._self._c;return t("v-card",{attrs:{flat:""}},[t("v-row",{staticClass:"ma-0 pa-0",attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-subheader",[e._v(e._s(e.$t("modals.detail.pageTagsAndCategories.subHeaderTag")))]),t("v-list-item-group",{attrs:{value:e.activeTags,"active-class":"accent--text",multiple:""}},[e._l(e.availableTags,(function(s,i){return[t("v-list-item",{key:s.title,on:{click:function(t){return e.addTag(s)}}},[t("v-list-item-content",[t("v-list-item-title",{domProps:{textContent:e._s(s)}})],1)],1),i<e.availableTags.length-1?t("v-divider",{key:i}):e._e()]}))],2)],1),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-subheader",[e._v(e._s(e.$t("modals.detail.pageTagsAndCategories.subHeaderCategories")))]),t("v-list-item-group",{attrs:{value:e.activeCategory,"active-class":"accent--text"}},[e._l(e.availableCategories,(function(s,i){return[t("v-list-item",{key:s.title,on:{click:function(t){return e.setCategory(s)}}},[t("v-list-item-content",[t("v-list-item-title",{domProps:{textContent:e._s(s.name)}})],1)],1),i<e.availableCategories.length-1?t("v-divider",{key:i}):e._e()]}))],2)],1)],1)],1)},ge=[],_e={name:"TorrentTagsAndCategories",mixins:[c.xG],props:{hash:String},data:()=>({categories:[]}),computed:{...(0,n.Se)(["getTorrent","getAvailableTags","getCategories"]),torrent(){return this.getTorrent(this.hash)},availableTags(){return this.getAvailableTags()},availableCategories(){return this.getCategories()},activeCategory(){return this.availableCategories.map((e=>e.name)).indexOf(this.torrent.category)},activeTags(){const e=[],t=this.torrent.tags;return t&&t.length&&t.forEach((t=>{const s=this.availableTags.indexOf(t);-1!==s&&e.push(s)})),e}},created(){this.$store.commit("FETCH_CATEGORIES")},methods:{addTag(e){if(this.activeTags.includes(this.availableTags.indexOf(e)))return this.deleteTag(e);o.Z.addTorrentTag(this.hash,e)},deleteTag(e){o.Z.removeTorrentTag(this.hash,e)},setCategory(e){if(this.torrent.category===e.name)return o.Z.setCategory([this.hash],"");o.Z.setCategory([this.hash],e.name)},deleteCategory(){o.Z.setCategory([this.hash],"")}}},fe=_e,Ce=s(266),ye=s(9223),be=s(7912),Te=s(1713),ke=s(2540),Se=(0,u.Z)(fe,ue,ge,!1,null,"787aef1a",null),we=Se.exports;_()(Se,{VCard:C.Z,VCol:Ce.Z,VDivider:ye.Z,VListItem:T.Z,VListItemContent:k.km,VListItemGroup:be.Z,VListItemTitle:k.V9,VRow:Te.Z,VSubheader:ke.Z});var xe={name:"TorrentDetail",components:{Content:j,Info:H,Peers:ie,Trackers:pe,TagsAndCategories:we},data(){return{tab:null,items:[{tab:"Info"},{tab:"Content"}],peers:[],mdiClose:h.r5M}},computed:{...(0,n.Se)(["getTorrent"]),torrent(){return this.getTorrent(this.hash)},hash(){return this.$route.params.hash}},methods:{close(){this.$router.back()}}},$e=xe,Oe=s(626),Ie=s(2165),Ze=s(8263),Pe=s(5085),Ae=s(1475),Ve=(0,u.Z)($e,i,a,!1,null,null,null),De=Ve.exports;_()(Ve,{VBtn:f.Z,VCardActions:oe.h7,VCardText:oe.ZB,VCol:Ce.Z,VIcon:y.Z,VRow:Te.Z,VTab:Oe.Z,VTabItem:Ie.Z,VTabs:Ze.Z,VTabsItems:Pe.Z,VTabsSlider:Ae.Z})}}]);
//# sourceMappingURL=737.21c507ae.js.map